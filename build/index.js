!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=16)}([function(e,t){!function(){e.exports=this.wp.element}()},function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},function(e,t){function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}e.exports=function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}},function(e,t,n){var r=n(11),o=n(12);e.exports=function(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?o(e):t}},function(e,t){function n(t){return e.exports=n=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},n(t)}e.exports=n},function(e,t,n){var r=n(13);e.exports=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&r(e,t)}},function(e){e.exports=JSON.parse('{"name":"wpengine-exercise/postslist","category":"common","attributes":{"postsToShow":{"type":"number","default":6},"paged":{"type":"number","default":1}}}')},function(e,t){!function(){e.exports=this.lodash}()},function(e,t,n){var r;
/*!
  Copyright (c) 2017 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/!function(){"use strict";var n={}.hasOwnProperty;function o(){for(var e=[],t=0;t<arguments.length;t++){var r=arguments[t];if(r){var s=typeof r;if("string"===s||"number"===s)e.push(r);else if(Array.isArray(r)&&r.length){var c=o.apply(null,r);c&&e.push(c)}else if("object"===s)for(var i in r)n.call(r,i)&&r[i]&&e.push(i)}}return e.join(" ")}e.exports?(o.default=o,e.exports=o):void 0===(r=function(){return o}.apply(t,[]))||(e.exports=r)}()},function(e,t){!function(){e.exports=this.moment}()},function(e,t){e.exports=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},function(e,t){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(t){return"function"==typeof Symbol&&"symbol"===n(Symbol.iterator)?e.exports=r=function(e){return n(e)}:e.exports=r=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":n(e)},r(t)}e.exports=r},function(e,t){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}},function(e,t){function n(t,r){return e.exports=n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},n(t,r)}e.exports=n},,,function(e,t,n){"use strict";n.r(t);var r={};n.r(r),n.d(r,"name",(function(){return K})),n.d(r,"category",(function(){return Q})),n.d(r,"settings",(function(){return W}));var o=n(10),s=n.n(o),c=n(6),i=n(1),a=n.n(i),l=n(2),u=n.n(l),p=n(3),f=n.n(p),b=n(4),m=n.n(b),y=n(5),d=n.n(y),O=n(0),g=n(7),h=n(8),j=n.n(h),v=n(9),w=n.n(v),k=wp.i18n.__,E=wp.editor.InspectorControls,_=wp.element,x=_.Fragment,P=_.Component,S=wp.components,N=S.PanelBody,T=S.RangeControl,M=function(e){function t(){return a()(this,t),f()(this,m()(t).apply(this,arguments))}return d()(t,e),u()(t,[{key:"render",value:function(){var e=this.props,t=e.attributes,n=e.setAttributes,r=t.postsToShow;return Object(O.createElement)(x,null,Object(O.createElement)(E,null,Object(O.createElement)(N,{title:k("Post Settings","postslist-block")},Object(O.createElement)(T,{label:k("Number of posts","postslist-block"),help:k("Change the number of posts displayed.","postslist-block"),value:r,onChange:function(e){return n({postsToShow:e})},min:2,max:20}))))}}]),t}(P),C=wp.i18n.__,A=wp.compose.compose,D=wp.data.withSelect,L=wp.htmlEntities.decodeEntities,B=wp.element,I=B.Fragment,R=B.Component,F=wp.components,U=F.Placeholder,H=F.Spinner,J=F.withSpokenMessages,Y=F.Button,q=function(e){function t(){return a()(this,t),f()(this,m()(t).apply(this,arguments))}return d()(t,e),u()(t,[{key:"componentDidMount",value:function(){(0,this.props.setAttributes)({paged:1})}},{key:"render",value:function(){var e=this.props,t=e.isSelected,n=e.attributes,r=e.setAttributes,o=e.postsList,s=e.className,c=n.paged;return Array.isArray(o)&&o.length?Object(O.createElement)(I,null,t&&Object(O.createElement)(M,this.props),Object(O.createElement)("section",{className:j()(s,"postslist-block")},Object(g.map)(o,(function(e,t){return Object(O.createElement)("article",{key:t,id:"post-"+e.id,className:j()("hentry","post-"+e.id,e.type,"type-"+e.type,"status-"+e.status,"format-"+e.format,e.featured_image_src?"has-post-thumbnail":null)},Object(O.createElement)("header",{className:"entry-header"},Object(O.createElement)("h2",null,Object(O.createElement)("a",{href:e.link,target:"_blank",rel:"noopener noreferrer"},L(e.title.rendered.trim())||C("(Untitled)","postslist-block"))),Object(O.createElement)("div",{className:"entry-meta"},Object(O.createElement)("span",{className:"post-author"},Object(O.createElement)("a",{target:"_blank",rel:"noopener noreferrer",href:e.author_info.author_link},e.author_info.display_name)),Object(O.createElement)("span",{className:"posted-on"},Object(O.createElement)("a",{href:e.link,target:"_blank",rel:"noopener noreferrer"},Object(O.createElement)("time",{className:"entry-date published",dateTime:w()(e.date_gmt).utc().format()},w()(e.date_gmt).local().format("MMMM DD, Y","postslist-block")))))),e.featured_image_src?Object(O.createElement)("div",{className:"entry-media"},Object(O.createElement)("a",{href:e.link,className:"post-thumbnail",target:"_blank",rel:"noopener noreferrer"},Object(O.createElement)("figure",null,Object(O.createElement)("img",{src:e.featured_image_src,alt:""})))):null,Object(O.createElement)("div",{className:"entry-summary"},Object(O.createElement)("div",{dangerouslySetInnerHTML:{__html:(n=e.excerpt.rendered,r=55,n.split(" ").splice(0,r).join(" "))}})));var n,r})),Object(O.createElement)("nav",{className:"navigation pagination",role:"navigation"},Object(O.createElement)("h2",{className:"screen-reader-text"},C("Posts navigation","postslist-block")),Object(O.createElement)("div",{className:"nav-links"},c>1?Object(O.createElement)(Y,{href:"#",isLink:!0,className:"prev page-numbers",onClick:function(){r({paged:c-1})}},C("« Newer Posts","postslist-block")):"",Object(O.createElement)(Y,{href:"#",isLink:!0,className:"next page-numbers",onClick:function(){r({paged:c+1})}},C("Older Posts »","postslist-block")))))):Object(O.createElement)(I,null,Object(O.createElement)(U,{icon:"excerpt-view",label:C("Posts List Block","postslist-block")},Array.isArray(o)?C("No posts found.","postslist-block"):Object(O.createElement)(H,null)))}}]),t}(R),z=A([D((function(e,t){var n=t.attributes,r=n.postsToShow,o=n.paged;return{postsList:(0,e("core").getEntityRecords)("postType","post",Object(g.pickBy)({per_page:r,offset:o>1?r*(o-1):0,exclude:[e("core/editor").getCurrentPostId()]},(function(e){return!Object(g.isUndefined)(e)})))}})),J])(q),G=wp.i18n.__,K=c.name,Q=c.category,V=c.attributes,W={title:G("Posts List","postslist-block"),description:G("Display posts list with defined number of items to be shown.","postslist-block"),icon:"excerpt-view",keywords:[G("posts","postslist-block"),G("post","postslist-block"),G("blog","postslist-block")],attributes:V,supports:{align:["wide","full"]},edit:z,save:function(){return null}};function X(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}n.d(t,"registerBlocks",(function(){return $}));var Z=wp.blocks.registerBlockType;function $(){[r].forEach((function(e){var t=e.name,n=e.category,r=e.settings;Z("".concat(t),function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?X(n,!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):X(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({category:n},r))}))}$()}]);